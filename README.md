# TDD

목표에 도달하기 위해서는 중간 중간 올바른 방향으로 가고 있는지 확인해야한다.
무언가를 할때는 피드백이 중요하다. 피드백은 빠를수록 좋다.
테스트를 통해 목표를 확인하고 나아가야할지 멈춰야할지 알 수 있다.

## 요약

**기본원칙**

1. 작은 테스트를 만든다.
2. 실패를 확인한다.
3. 동작하는 코드를 만든다.
4. 리팩토링(중복제거)을 한다.

## 생각

절차는 중요한게 아니다. 할 수 있다는게 중요하다.
우리의 목표는 동작하는 깔끔한 코드이다. 깔끔한 코드를 설계하는건 쉬운 일이 아니다.

>p.48 의존성과 중복
>
>의존성은 소프트웨어 개발의 모든 부분에서 핵심적인 문제다.
>...
>의존성이 문제 그자체라면 중복(duplication)은 문제의 징후다. 중복의 가장 흔한 예는 로직의 중복이다.
>...
>중복된 로직을 하나로 끄집에내는 일엔 객체를 이용하는 것이 최고다.
>...
>문제 자체는 남겨둔 채로 징후만을 제거하면 다른 어딘가에서 최악의 형태로 문제가 드러나곤 하는 현실 세계의 일반적인 양상과는 달리,
>프로그램에서는 중복만 제거해 주면 의존성도 제거된다.

근본 원인을 제거해야한다. 그렇지 않으면 증상은 옮겨다닌다.
_"중복만 제거하면 의존성이 제거된다."_ 하나의 기능이 여러 코드에 존재한다면 그 기능을 수정하기 위해서는
기능을 사용하는 코드 전체를 수정해야한다.

>p.54
>
>우리 목적은 작동하는 깔끔한 코드를 얻는 것이다.
>...
>작동하는 깔끔한 코드를 얻는 것은 때로는 최고의 프로그래머들조차 도달하기 힘든 목표고,
>...
>그렇다면 나누어서 정복하자. 일단 '작동하는 깔끔한 코드'를 얻어야 한다는 전체 문장 중에서 '작동하는'에 해당하는 부분을 먼저 해결하라.
>그러고나서 '깔끔한 코드' 부분을 해결하는 것이다. 이러한 접근 방식은 '깔끔한 코드' 부분을 먼저 해결한 후에, '작동하는' 부분을 해결해 가면서
>배운 것들을 설계에 반영하느라 허둥거리는 아키텍처 주도 개발(architecture-driven-development)과 정반대다.

깔끔한 코드를 아키텍처 설계로 보는 관점을 생각해보면 서버의 아키텍처가 아닌 코드의 아키텍처를 의미하는 건가?

지금 수행하는 프로젝트는 MSA 가 중심이 되고 있고 코드 설계는 DDD를 한다고 한다. (흉내만 내고 있다.)
설계를 한 분들은 DDD 설계 후 확신을 못 가지고 있다. 결국 작동하는 코드를 만들어야 확신을 가질 수 있을 것이다.

>p.57
>
>설계상의 결함을 그 결함으로 실패하는 테스트로 변환했다.

어떤 실패 테스트를 작성해야하는가에 대한 기준이 되겠다.

>p.59 값객체
>객체를 값처럼 쓸수 있는데 이것을 값 객체 패턴(value object pattern)이라고 한다.
>값 객체에 대한 제약사항 중 하나는 객체의 인스턴스 변수가 생성자를 통해서 일단 설정된 후에는 결코 변하지 않는다는 것이다.
>...
>값 객체를 사용하면 별칭에 대해 걱청할 필요가 없다. $5가 있을 때 그것이 영원히 $5임을 보장 받을 수 있다.
>누군가가 $7를 원한다면 새로운 객체를 만들어야 할 것이다.
>...
>값 객체가 암시하는 것 중 하나는 2장에서와 같이 모든 연산은 새 객체를 반환해야 한다는 것이다.
>또다른 암시는 값 객체는 equals()를 구현해야 한다는 것인데, 왜냐하면 $5라는 것은 항상 다른 $5만큼이나 똑같이 좋은 것이기 때문이다.
>...
>해시 테이블의 키로 쓸 생각이면 equals()를 구현할 때에 hashCode()를 같이 구현해야한다.

별칭은 참조를 의미하는 것 같다.
